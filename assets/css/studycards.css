/* Studycards view container */
/* ID bağımlılığı geri getirildi çünkü genel seçici diğer sayfaları bozuyor */
#view-cards {
  height: 100%;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

/* Header İçeriğini Ortala (Sadece Studycards için) */
/* Eğer view-header içinde studycards'a özel bir sınıf yoksa, bu genel header'ı bozabilir. 
   Ancak bu dosya sadece studycards yüklendiğinde aktifse sorun olmaz. 
   Yine de güvenli olması için .scene kardeşini kontrol eden bir yapı veya genel yapı kullanıyoruz. */
.scene ~ .view-header, 
.view-header:has(+ .container) { 
  justify-content: center !important;
}

/* Ortalamayı sağlayan kapsayıcı */
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  flex: 1;
  width: 100%;
  overflow-y: hidden;
  padding-bottom: calc(7rem + env(safe-area-inset-bottom)); /* Nav bar için ekstra boşluk */
  gap: 0.5rem;
}

/* Ortak genişlik */
.status,
.scene,
.card,
.controls {
  width: 100%;
  max-width: 32rem !important; /* Makul genişlik */
}

/* Status */
.status {
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  gap: 0.5rem;
}

.center-group {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  justify-content: center;
  position: relative;
  gap: 0.25rem;
}

.right-group {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  gap: 0.25rem;
}

/* Back + Reset */
.status #resetProgress {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text);
  padding: 0.5rem 1rem !important;
  border-radius: 1rem !important;
  cursor: pointer;
  font-size: 1rem !important;
}

.status #resetProgress:hover {
  border-color: var(--accent);
  color: var(--accent);
}

/* Orta grup */
.status .center-group {
  display: flex;
  gap: 0.25rem;
}

/* Select */
#jumpSelect {
  appearance: none;
  background: #0b1220;
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: 0.5rem !important;
  padding: 0.4rem 0.8rem !important;
  font-size: 1rem !important;
  text-align: center;
  min-width: 5rem !important;
}

@media (max-width: 480px) {
  #jumpSelect {
    font-size: 1.2rem;
    padding: 0.2rem 0.4rem;
  }
}

.scene {
  width: 100%;
  display: grid;
  grid-template-areas: "stack";
  place-items: center;
  perspective: 1000px;
  flex: 1; /* Alanı doldurması için */
}

/* Feedback (sabit, scale yok) */
.swipe-feedback {
  position: fixed;            /* karta değil, ekrana göre */
  left: 50%;
  transform: translateX(-50%) scale(0.8);

  font-size: 4rem !important;
  opacity: 0;
  pointer-events: none;
  z-index: 999;

  transition: opacity 0.25s ease, transform 0.25s ease;
}

.swipe-feedback.show {
  opacity: 1;
  transform: translateX(-50%) scale(1);
}

.swipe-feedback.known   { color: #16a34a; }
.swipe-feedback.unknown { color: #dc2626; }

/* ================= CARD ================= */

.card {
  grid-area: stack;
  width: 100%;
  height: 100% !important; /* Yüksekliği kapsayıcıya (scene) eşitle */
  min-height: 20rem !important; /* Makul yükseklik */
  position: relative;
  cursor: pointer;
  transform-style: preserve-3d;
  transition: transform 0.5s ease, opacity 0.3s ease;
  z-index: 2;
  background-color: transparent; /* Kart yüzleri zaten renkli */
  display: grid; /* Yüzleri üst üste bindirmek için Grid */
  grid-template-columns: 1fr;
}

/* Arkadaki Kart (Next Card) */
.card.next-card {
  z-index: 1;
  transform: scale(0.9) translateY(1rem);
  opacity: 0;
  pointer-events: none; /* Tıklanamaz */
}

/* Animasyon Sınıfları */

/* Bilindi (Sola Git) */
.card.swipe-left {
  transform: translateX(-120%) rotate(-15deg);
  opacity: 0;
}

/* Bilinmedi (Sağa Git) */
.card.swipe-right {
  transform: translateX(120%) rotate(15deg);
  opacity: 0;
}

/* Geri Gelme (Prev) Animasyonları */
/* Önden gelen kart (Büyükten küçülerek) */
.card.prev-enter {
  z-index: 10; /* En üstte olsun */
  transform: scale(1.15);
  opacity: 0;
  pointer-events: none;
}

.card.prev-enter.active {
  transform: scale(1);
  opacity: 1;
}

/* Arkaya giden aktif kart */
.card.push-to-back {
  transform: scale(0.9) translateY(1rem);
  opacity: 0;
  z-index: 1;
}

/* Arkadan Gelenin Öne Çıkması */
.card.next-card.enter {
  transform: scale(1) translateY(0);
  opacity: 1;
}

/* Card yüzleri */
.card-face {
  grid-area: 1 / 1; /* Hepsi aynı hücrede üst üste */
  width: 100%;      /* Tam genişlik */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;

  background: linear-gradient(180deg, #111827, #0b1220);
  border: 1px solid var(--border);
  border-radius: 1.5rem !important;
  padding: 1.5rem !important; /* Makul iç boşluk */
  overflow-y: auto; /* İçerik çok uzunsa kart içinde kaydırma çubuğu çıksın */

  backface-visibility: hidden;
}

/* Flip için zorunlu transformlar */
.card-face.front {
  transform: rotateY(0deg) translateZ(1px); /* Z-fighting önlemi */
}

.card-face.back {
  transform: rotateY(180deg) translateZ(1px); /* Z-fighting önlemi */
  color: var(--accent);
}

/* ❌ transition YOK */
.card.flip {
  transform: rotateY(-180deg);
}

/* KESİN ÇÖZÜM: Doğrudan ID hedefliyoruz */
#question,
#answer,
#nextQuestion,
#nextAnswer {
  font-size: 1.6rem; /* Makul yazı boyutu */
  line-height: 1.3;
  margin: 0;
  padding: 0.5rem;
  width: 100%;
}

/* Controls */
.controls {
  display: flex;
  gap: 1rem;
  justify-content: center;
  align-items: center;
}

.controls button {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text);
  padding: 0.8rem;
  border-radius: 0.8rem;
  cursor: pointer;
}

.controls button:hover {
  border-color: var(--accent);
  color: var(--accent);
}

/* Önceki ve Sonraki Butonları */
#undoBtn,
#toggleFavorite,
#shareBtn {
  font-size: 1.5rem !important;
  padding: 0;
  width: 3.5rem !important;
  height: 3.5rem !important;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  background-color: #0b1220;
  border: 1px solid var(--border);
  transition: all 0.2s ease;
}

/* Favori Butonu Aktif (Dolu Yıldız) Hali - Xenon Efekti */
#toggleFavorite.active-fav {
  color: #e0ffff; /* Mavimsi Beyaz */
  border-color: #00ffff;
  text-shadow: 0 0 10px #00ffff, 0 0 20px #0099ff; /* Parlama */
  background: rgba(0, 255, 255, 0.05);
}

/* Kart Üzerindeki Favori Göstergesi */
.card-fav-indicator {
  position: absolute;
  top: 1.5rem;
  left: 50%;
  transform: translateX(-50%);
  font-size: 2.5rem;
  color: #e0ffff;
  text-shadow: 0 0 10px #00ffff;
  z-index: 5;
  pointer-events: none;
}

#markKnown,
#markUnknown{
  font-size: 1.8rem !important;
  width: 4rem !important;
  height: 4rem !important;
  border-radius: 50%;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

#markKnown {
  background: #0b1f14;
  border: 1px solid #16a34a;
  color: #16a34a;
  box-shadow: 0 0 15px rgba(22, 163, 74, 0.2);
  transition: all 0.2s ease;
}

#markUnknown {
  border: 1px solid #dc2626;
  color: #dc2626;
  box-shadow: 0 0 15px rgba(220, 38, 38, 0.2);
  transition: all 0.2s ease;
}

#markKnown:active,
#markUnknown:active {
  transform: scale(0.95);
  color: #0b1f14;
}

#markKnown:active {
  background: #16a34a;
}

#markUnknown:active {
  background: #dc2626;
}

/* ================= SHUFFLE TOGGLE ================= */
.shuffle-label {
  display: contents;
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  vertical-align: middle;
  -webkit-tap-highlight-color: transparent;
}

.shuffle-label::before {
  content: "Karıştır";
  margin-right: 0.8rem;
  font-size: 1.1rem !important;
  color: var(--muted);
  transition: color 0.3s ease;
}

.shuffle-label:hover::before {
  color: var(--text);
}

.shuffle-label:has(input:checked)::before {
  color: var(--accent);
}

.shuffle-label input {
  display: none; /* Standart checkbox'ı gizle */
}

.shuffle-label .slider {
  width: 3rem !important;
  height: 1.6rem !important;
  background-color: #0b1220; /* Koyu zemin */
  border: 1px solid var(--border);
  border-radius: 1.6rem !important;
  position: relative;
  transition: all 0.3s ease;
}

.shuffle-label .slider::after {
  content: "";
  position: absolute;
  top: 0.2rem;
  left: 0.2rem;
  width: 1.1rem !important;
  height: 1.1rem !important;
  background-color: var(--muted); /* Pasif renk */
  border-radius: 50%;
  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* Aktif (Checked) Durum */
.shuffle-label input:checked + .slider {
  border-color: var(--accent);
  background-color: rgba(56, 189, 248, 0.15); /* Hafif mavi parıltı */
}

.shuffle-label input:checked + .slider::after {
  transform: translateX(1.4rem); /* Sağa kaydır */
  background-color: var(--accent); /* Aktif renk */
  box-shadow: 0 0 8px rgba(56, 189, 248, 0.5); /* Neon efekti */
}

/* Hover Durumu */
.shuffle-label:hover .slider {
  border-color: var(--text);
}

/* ================= FAVORITES TOGGLE ================= */
.favorites-label {
  display: contents;
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  vertical-align: middle;
  -webkit-tap-highlight-color: transparent;
}

.favorites-label::before {
  content: "Favoriler";
  margin-right: 0.8rem;
  font-size: 1.1rem !important;
  color: var(--muted);
  transition: color 0.3s ease;
}

.favorites-label:hover::before {
  color: var(--text);
}

.favorites-label:has(input:checked)::before {
  color: #e0ffff; /* Xenon Mavisi */
}

.favorites-label input {
  display: none;
}

.favorites-label .slider {
  width: 3rem !important;
  height: 1.6rem !important;
  background-color: #0b1220;
  border: 1px solid var(--border);
  border-radius: 1.6rem !important;
  position: relative;
  transition: all 0.3s ease;
}

.favorites-label .slider::after {
  content: "";
  position: absolute;
  top: 0.2rem;
  left: 0.2rem;
  width: 1.1rem !important;
  height: 1.1rem !important;
  background-color: var(--muted);
  border-radius: 50%;
  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* Aktif Durum */
.favorites-label input:checked + .slider {
  border-color: #00ffff;
  background-color: rgba(0, 255, 255, 0.15);
}

.favorites-label input:checked + .slider::after {
  transform: translateX(1.4rem);
  background-color: #00ffff;
  box-shadow: 0 0 8px rgba(0, 255, 255, 0.5);
}

.favorites-label:hover .slider {
  border-color: var(--text);
}